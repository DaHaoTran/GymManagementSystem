@page "/employee-salaries-filter"
@using Client_FAU.Variables
@using Models

<PageTitle>EmployeeSalaryAfterFilterPage</PageTitle>

@if(Load.IsLoading)
{
    <Loading></Loading>
}

@if (!string.IsNullOrEmpty(Notification.message))
{
    <div class="alert alert-info mt-2 d-flex">
        <div class="w-50">
            @Notification.message
        </div>
        <div class="w-100 d-flex justify-content-end align-items-center">
            <a class="btn btn-close" data-bs-dismiss="alert" aria-label="Close" @onclick="() => Notification.message = string.Empty"/>
        </div>
    </div>
}

<!-- start table -->
<RadzenDataGrid class="mt-3" AllowFiltering="true" AllowColumnResize="true" AllowAlternatingRows="false" FilterMode="FilterMode.CheckBoxList"
                AllowSorting="true" PageSize="10" AllowPaging="true" PagerHorizontalAlign="HorizontalAlign.Left"
                AllowMultiColumnSorting="true" ShowMultiColumnSortingIndex="true"
                Data="@data" TItem="EmployeeSalary" ColumnWidth="300px" LogicalFilterOperator="LogicalFilterOperator.Or" ShowPagingSummary="true"
                IsLoading=@isLoading Sort="@ShowLoading" Page="@ShowLoading" Group="@ShowLoading" Filter="@ShowLoading">
    <HeaderTemplate>
        <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center">
            <RadzenText TextStyle="TextStyle.H3" TextAlign="TextAlign.Center">Employee Salary</RadzenText>
        </RadzenStack>
    </HeaderTemplate>
    <Columns>
        <!-- edit button -->
        <RadzenDataGridColumn Frozen="true" Filterable="false" Width="80px" Title="Edit">
            <Template Context="item">
                <RadzenButton Icon="edit" ButtonStyle="ButtonStyle.Light" Variant="Variant.Flat" Size="ButtonSize.Small" class="mb-1 mt-1" data-bs-toggle="modal" data-bs-target="#editmodal" @onclick:stopPropagation=true /> @* Click="@(arg => SetEditState(item))" *@
            </Template>
        </RadzenDataGridColumn>
        <RadzenDataGridColumn Property="@nameof(EmployeeSalary.EmpSalCode)" Title="EquipCode" Frozen="false" Width="160px" TextAlign="TextAlign.Left" />
        <RadzenDataGridColumn Property="@nameof(EmployeeSalary.FullName)" Title="EquipName" Width="160px" />
        <RadzenDataGridColumn Property="@nameof(EmployeeSalary.BranchName)" Title="Status" Width="160px" />
        <RadzenDataGridColumn Property="@nameof(EmployeeSalary.Month)" Title="Status" Width="160px" />
        <RadzenDataGridColumn Property="@nameof(EmployeeSalary.WorkDays)" Title="StaffUpdate" Width="160px" />
        <RadzenDataGridColumn Property="@nameof(EmployeeSalary.PriceTotals)" Title="AdminUpdate" Width="160px" />
        <RadzenDataGridColumn Property="@nameof(EmployeeSalary.AccountCode)" Title="AdminUpdate" Width="160px" />
        <RadzenDataGridColumn Title="Photo" Frozen="true" Sortable="false" Filterable="false" Width="160px" TextAlign="TextAlign.Center">
            <Template Context="item">
                @if (item.ProofImage != null && item.ProofImage.Length > 0)
                {
                    <RadzenImage Style="height: 60px;width: 50px" Path="@($"data:image/jpeg/png;base64,{Convert.ToBase64String(item.ProofImage!)}")" AlternateText="base64 image" />
                }
                else
                {
                    <RadzenText>No Image Here</RadzenText>
                }
            </Template>
        </RadzenDataGridColumn>
    </Columns>
</RadzenDataGrid>
<!-- end table -->
